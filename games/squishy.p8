pico-8 cartridge // http://www.pico-8.com
version 16
__lua__
--base variable
score=0
lives=3

--paddle variables
padx=52
pady=122
padw=24
padh=4

--ball variables
ballx=64
bally=64
ballsize=3
ballxdir=5
ballydir=-3

--move paddle function
function movepaddle()
 --substract 3 if btn=0
 --0 = <-
 if btn(0) then
   padx-=3
 --add 3 if btn=1
 --1 = ->
 elseif btn(1) then
   padx+=3
 end
end

--move ball function
function moveball()
 ballx+=ballxdir
 bally+=ballydir
end

-- reset ball function
function resetball()
 if bally>128-ballsize then
  if lives>0 then
   --start next life
   --sound effect 3
   sfx(3)
   bally=24
   lives-=1
  else
   --game over
   ballydir=0
   ballxdir=0
   bally=64
   --sound effect 4
   sfx(4)
  end
 end
end

--function bounceball
function bounceball()
 --ball bounce off left wall
 if ballx<ballsize then
  ballxdir=-ballxdir
  --sound effect 0
  sfx(0)
 end
 --ball bounce off right wall
 if ballx>128-ballsize then
  ballxdir=-ballxdir
  --sound effect 0
  sfx(0)
 end
 --ball bounce top wall
 if bally<ballsize then
  ballydir=-ballydir
  --sound effect 0
  sfx(0)
 end
end

--function paddle bounce
function paddlebounce()
 if ballx>=padx and
  ballx<=padx+padw and
  bally>pady then
  --sound effect 0
  sfx(0)
  --increase score on contact
  score+=10
  ballydir=-ballydir
 end
end

--update function
--this gets called 30 
-- times every second.
--it's where everything updates
-- in the game
function _update()
 movepaddle()
 bounceball()
 paddlebounce()
 moveball()
 resetball()
end

--draw function
--this is where the game is 
-- drawn
function _draw()
 --clears the screen
 rectfill(0,0,128,128,3)
 --draw the lifes
 for i=1,lives do
  spr(004,90+i*8,4)
 end
 --draw the score
 print(score,12,6,15)
 --draw the paddle
 rectfill(padx,pady,padx+padw
 ,pady+padh,15)
 --draw the ball
 circfill(ballx,bally,ballsize
 ,15)
end 
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000ff0ff000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000f88f88f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000f88888f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000770000000000000000000000000000f888f000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0070070000000000000000000000000000f8f0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
000400003a0703a0003a0003a0003a0003a0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00060000280701b07015070110700d070060700507000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
01060000344502d450204501b4501a4501745013450104500e4500d4500c4500a4500945008450084500845008400084000640006400054000000000000000000000000000000000000000000000000000000000
